<div class="row">

  <div class="col-md-12">

    <div class="photo-upload-section mb-4" ng2FileDrop [ngClass]="{'nv-file-over': hasBaseDropZoneOver}"
      (fileOver)="fileOverBase($event)" [uploader]="uploader">

      <div class="upload-area" [ngClass]="{'upload-hover': hasBaseDropZoneOver}">
        <i class="fas fa-cloud-upload-alt upload-icon"></i>
        <p class="upload-text">Drop photos here</p>
        <p class="upload-subtext">Supported formats: JPG, PNG, GIF</p>
      </div>
      <input type="file" #fileInput class="d-none" multiple accept="image/*">
    </div>
  </div>

  <div class="col-md-12">
    <div class="upload-container" *ngIf="uploader?.queue?.length" >
      <div class="upload-header">
        <h3><i class="fas fa-cloud-upload-alt"></i> Upload Queue</h3>
      </div>

      <table class="upload-table">
        <thead>
          <tr>
            <th style="width: 50%">File</th>
            <th style="width: 15%">Size</th>
            <th style="width: 20%">Progress</th>
            <th style="width: 15%">Status</th>
            <th style="width: 10%">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of uploader?.queue">
            <td>
              <div class="file-info">
                <div class="file-icon">
                  <i class="fas fa-image"></i>
                </div>
                <div class="file-details">
                  <p class="file-name">{{ item?.file?.name }}</p>
                  <p class="file-size">{{ item?.file?.size/1024/1024 | number:'.2' }} MB</p>
                </div>
              </div>
            </td>
            <td *ngIf="uploader?.options?.isHTML5">
              <span class="size-badge">{{ item?.file?.size/1024/1024 | number:'.2' }} MB</span>
            </td>
            <td *ngIf="uploader?.options?.isHTML5">
              <div class="progress-container">
                <div class="progress">
                  <div class="progress-bar" [ngStyle]="{ 'width': item.progress + '%' }"></div>
                </div>
                <p class="progress-text">{{ item.progress }}%</p>
              </div>
            </td>
            <td>
              <span class="status-badge status-uploading">
                <i class="fas fa-spinner fa-spin"></i>
                Uploading
              </span>
            </td>
            <td>
              <div class="actions">
                <button class="btn-action btn-remove" title="Remove">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div *ngIf="uploader?.queue?.length" class="upload-actions mt-3 text-end">
    <button type="button" class="btn btn-success btn-s me-2" (click)="uploader?.uploadAll()"
      [disabled]="!uploader?.getNotUploadedItems()?.length">
      <span class="fa fa-upload"></span> Upload all
    </button>
    <button type="button" class="btn btn-warning btn-s me-2" (click)="uploader?.cancelAll()"
      [disabled]="!uploader?.isUploading">
      <span class="fa fa-ban"></span> Cancel all
    </button>
    <button type="button" class="btn btn-danger btn-s" (click)="uploader?.clearQueue()"
      [disabled]="!uploader?.queue?.length">
      <span class="fa fa-trash"></span> Remove all
    </button>
  </div>

</div>

<div class="card shadow-sm border-0 animate__animated animate__fadeInUp">
  <div class="card-body p-4">
    <h5 class="card-title mb-4">
      <i class="fas fa-images me-2 "></i>Your Gallery
    </h5>
    <div class="photos-container" *ngIf="(member()?.photos?.length??0) > 0">
      <div class="row g-3">
        <div class="col-lg-4 col-md-6 col-sm-12" *ngFor="let photo of member().photos; let i = index">
          <div class="photo-card-edit">
            <img [src]="photo.url" [alt]="'Photo ' + (i + 1)" class="photo-img">
            <div class="photo-actions">
              <button type="button" class="btn btn-sm btn-primary" [disabled]="photo.isMain" (click)="setMainPhoto(photo)">
                <i class="fas fa-star"></i>
              </button>
              <button type="button" class="btn btn-sm btn-danger" [disabled]="photo.isMain" (click)="deletePhoto(photo)">
                <i class="fas fa-trash"></i>
              </button>
            </div>
            <div class="main-photo-badge" *ngIf="photo.isMain">
              <i class="fas fa-star me-1"></i>Main
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="empty-photos" *ngIf="member().photos.length === 0">
      <div class="text-center py-5">
        <i class="fas fa-images empty-icon"></i>
        <h5 class="mt-3">No Photos Yet</h5>
        <p class="text-muted">Upload your first photo to get started</p>
      </div>
    </div>
  </div>
</div>
